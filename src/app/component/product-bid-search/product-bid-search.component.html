<div class="app-content" >
  <mat-expansion-panel *ngIf="isAuthenticateUser" [expanded]="true" hideToggle="true" class="example-headers-align">
    <div class="padding10-top">
      <mat-grid-list cols="10" rowHeight="75px">
        <mat-grid-tile class="app-title-left" [colspan]="3">
          <div class="form-container90percent">
            <mat-form-field appearance="fill" class="width100percent">
              <mat-label>Select a product</mat-label>
              <mat-select disableRipple [formControl]="productControl" required>
               <mat-option *ngFor="let item of productDetailArray" [value]="item">{{item.productName}}</mat-option>
               </mat-select>
            </mat-form-field>
          </div>
          
    </mat-grid-tile>
    <mat-grid-tile class="app-title-right" [colspan]="1">
        <div >
          <button mat-raised-button color="primary" id="buttonSearch" (click)="onSearchClick($event)" >Search</button>
        </div>
        </mat-grid-tile>
      </mat-grid-list>
    
    </div>
    </mat-expansion-panel>
  
  <mat-expansion-panel *ngIf="isAuthenticateUser && isUserClickOnSearch" [expanded]="true"  class="app-expansion product-detail-expansion"
   (opened)="productOpenState = true"
  (closed)="productOpenState = false">
  <mat-expansion-panel-header>
    <mat-panel-title>
      Product Details
    </mat-panel-title>
  </mat-expansion-panel-header>
    <div class="padding10-top">
    <mat-grid-list cols="12" rowHeight="75px">
      <mat-grid-tile class="app-title-left" [colspan]="1">Product Name</mat-grid-tile>
      <mat-grid-tile [colspan]="3"> 
        <mat-form-field appearance="fill" class="height50 width100percent">
          <mat-label>{{productDetail?.productName}}</mat-label>
          <input matInput [readonly]="true">
        </mat-form-field>
      </mat-grid-tile>
      <mat-grid-tile class="app-title-left" [colspan]="1">Short Description</mat-grid-tile>
      <mat-grid-tile [colspan]="3">
        <mat-form-field appearance="fill" class="height50 width100percent">
          <mat-label>{{productDetail?.shortDescription}}</mat-label>
          <input matInput [readonly]="true">
        </mat-form-field>
      </mat-grid-tile>
      <mat-grid-tile class="app-title-left" [colspan]="1">Detail Description</mat-grid-tile>
      <mat-grid-tile [colspan]="3">
        <mat-form-field appearance="fill" class="height50 width100percent">
          <mat-label>{{productDetail?.detailDescription}}</mat-label>
          <input matInput [readonly]="true">
        </mat-form-field>
      </mat-grid-tile>
     <mat-grid-tile class="app-title-left" [colspan]="1">Category</mat-grid-tile>
      <mat-grid-tile [colspan]="3">
        <mat-form-field appearance="fill" class="height50 width100percent">
          <mat-label>{{productDetail?.category}}</mat-label>
          <input matInput [readonly]="true">
        </mat-form-field>
      </mat-grid-tile>
      <mat-grid-tile class="app-title-left" [colspan]="1">Starting Price</mat-grid-tile>
      <mat-grid-tile [colspan]="3">
        <mat-form-field appearance="fill" class="height50 width100percent">
          <mat-label>{{productDetail?.startingPrice}}</mat-label>
          <input matInput [readonly]="true">
        </mat-form-field>
      </mat-grid-tile>
      <mat-grid-tile class="app-title-left" [colspan]="1">Bid End Date</mat-grid-tile>
      <mat-grid-tile [colspan]="3">
        <mat-form-field appearance="fill" class="height50 width100percent">
          <mat-label>{{bidEndDateShow}}</mat-label>
          <input matInput [readonly]="true">
        </mat-form-field>
      </mat-grid-tile>
      
    </mat-grid-list>
  </div>
 </mat-expansion-panel>
 <mat-expansion-panel *ngIf="isAuthenticateUser && isUserClickOnSearch" [expanded]="true"  class="app-expansion"
 (opened)="productBidOpenState = true"
  (closed)="productBidOpenState = false">
  <mat-expansion-panel-header>
    <mat-panel-title>
      Product Bid Detail
    </mat-panel-title>
  </mat-expansion-panel-header>
   <div *ngIf="isLoading" class="center-grid"><mat-spinner [diameter]="50"></mat-spinner></div>
   <div *ngIf="!hasData && !isLoading && !hasError" class="center-grid no-data"><span>No Data Found</span></div>
   <div *ngIf="!isLoading && hasError" class="center-grid"><mat-icon class="error-text">error</mat-icon><span class="error-text">error occured !!</span></div>
  <div *ngIf="hasData && !isLoading && !hasError" class="padding10-top">
    <table mat-table [dataSource]="productBidDetailList" class="mat-elevation-z8">
    <ng-container matColumnDef="productName">
      <th mat-header-cell *matHeaderCellDef> Product Name </th>
      <td mat-cell *matCellDef="let element"> {{element.product.productName}} </td>
    </ng-container>
    <ng-container matColumnDef="bidAmount">
      <th mat-header-cell *matHeaderCellDef> Bid Amount </th>
      <td mat-cell *matCellDef="let element"> {{element.bidAmount}} </td>
    </ng-container>
    <ng-container matColumnDef="email">
      <th mat-header-cell *matHeaderCellDef> Email </th>
      <td mat-cell *matCellDef="let element"> {{element.userDetail.email}} </td>
    </ng-container>
    <ng-container matColumnDef="phone">
      <th mat-header-cell *matHeaderCellDef> Phone </th>
      <td mat-cell *matCellDef="let element"> {{element.userDetail.phone}} </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="productBidColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: productBidColumns;"></tr>
    </table>
  </div>
 </mat-expansion-panel>
 </div>
